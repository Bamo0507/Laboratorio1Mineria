clear
setwd("~/Documents/Mineria_de_Datos/Laboratorio1")
library(readr)
movies_2026 <- read_csv("movies_2026.csv")
View(movies_2026)
knitr::opts_chunk$set(echo = TRUE)
library(nortest)
library(dplyr)
library(stringr)
library(tidyr)
library(readr)
movies <- read.csv(
"movies_2026.csv",
fileEncoding = "latin1",
stringsAsFactors = FALSE
)
library(nortest)
library(dplyr)
library(stringr)
library(tidyr)
library(readr)
# Helpers para columnas con "|"
split_pipe <- function(x) {
if (is.na(x) || x == "") return(character(0))
parts <- unlist(strsplit(x, "\\|"))
parts <- trimws(parts)
parts[parts != ""]
}
split_pipe_num <- function(x) {
nums <- suppressWarnings(as.numeric(split_pipe(x)))
nums[!is.na(nums)]
}
safe_mean <- function(x) if (length(x) == 0) NA_real_ else mean(x, na.rm = TRUE)
movies_raw <- read.csv("movies_2026.csv", stringsAsFactors = FALSE)
movies <- movies_raw %>%
mutate(
# ceros por ausencia de información
budget  = ifelse(budget  == 0, NA, budget),
revenue = ifelse(revenue == 0, NA, revenue),
voteAvg = ifelse(voteCount == 0, NA, voteAvg),
# Variables multi-valor -> conteos para tratar bryan|adriana|nery
genres_n = lengths(lapply(genres, split_pipe)),
productionCompany_n = lengths(lapply(productionCompany, split_pipe)),
productionCountry_n = lengths(lapply(productionCountry, split_pipe)),
actors_n = lengths(lapply(actors, split_pipe)),
actorsCharacter_n = lengths(lapply(actorsCharacter, split_pipe)),
# actorsPopularity -> métricas (para manejar 3.45|12.31|...)
actorsPopularity_mean = sapply(lapply(actorsPopularity, split_pipe_num), safe_mean),
)
movies_cuant <- movies[sapply(movies, is.numeric)]
movies_cual  <- movies[sapply(movies, function(x) !is.numeric(x))]
# Helpers para columnas con "|"
split_pipe <- function(x) {
if (is.na(x) || x == "") return(character(0))
parts <- unlist(strsplit(x, "\\|"))
parts <- trimws(parts)
parts[parts != ""]
}
split_pipe_num <- function(x) {
nums <- suppressWarnings(as.numeric(split_pipe(x)))
nums[!is.na(nums)]
}
safe_mean <- function(x) if (length(x) == 0) NA_real_ else mean(x, na.rm = TRUE)
movies_raw <- read.csv(
"movies_2026.csv",
fileEncoding = "latin1",
stringsAsFactors = FALSE
)
movies <- movies_raw %>%
mutate(
# ceros por ausencia de información
budget  = ifelse(budget  == 0, NA, budget),
revenue = ifelse(revenue == 0, NA, revenue),
voteAvg = ifelse(voteCount == 0, NA, voteAvg),
# Variables multi-valor -> conteos para tratar bryan|adriana|nery
genres_n = lengths(lapply(genres, split_pipe)),
productionCompany_n = lengths(lapply(productionCompany, split_pipe)),
productionCountry_n = lengths(lapply(productionCountry, split_pipe)),
actors_n = lengths(lapply(actors, split_pipe)),
actorsCharacter_n = lengths(lapply(actorsCharacter, split_pipe)),
# actorsPopularity -> métricas (para manejar 3.45|12.31|...)
actorsPopularity_mean = sapply(lapply(actorsPopularity, split_pipe_num), safe_mean),
)
movies_cuant <- movies[sapply(movies, is.numeric)]
movies_cual  <- movies[sapply(movies, function(x) !is.numeric(x))]
---
title: "Laboratorio 1 - Películas"
hist(movies_cuant$actorsPopularity_mean)
lillie_results$actorsPopularity_mean
lillie_results <- lapply(movies_cuant, lillie.test)
lillie_results$actorsPopularity_mean
hist(movies_cuant$actorsPopularity_mean)
lillie_results$actorsPopularity_mean
freqs <- lapply(movies_cual, table)
freqs$homePage
freqs$productionCompanyCountry
freqs$video
freqs$director
freqs$actorsCharacter
freqs$originalTitle
freqs$title
freqs$originalLanguage
freqs$releaseDate
freqs$productionCompanyCountry
freqs$video
freqs$director
freqs$actorsCharacter
freqs$originalTitle
freqs$title
freqs$originalLanguage
freqs$releaseDate
