---
title: "Laboratorio 1 - Películas"
author: "Bryan Martínez"
date: "2026-02-02"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(nortest)
library(dplyr)
library(stringr)
library(tidyr)
library(readr)
```

# Laboratorio 1 - CineVision Studios

```{r}
# Helpers para columnas con "|"
split_pipe <- function(x) {
  if (is.na(x) || x == "") return(character(0))
  parts <- unlist(strsplit(x, "\\|"))
  parts <- trimws(parts)
  parts[parts != ""]
}

split_pipe_num <- function(x) {
  nums <- suppressWarnings(as.numeric(split_pipe(x)))
  nums[!is.na(nums)]
}

safe_mean <- function(x) if (length(x) == 0) NA_real_ else mean(x, na.rm = TRUE)

movies_raw <- read.csv(
  "movies_2026.csv",
  fileEncoding = "latin1",
  stringsAsFactors = FALSE
)

movies <- movies_raw %>%
  mutate(
    # ceros por ausencia de información
    # validar con erick
    #budget  = ifelse(budget  == 0, NA, budget),
    #revenue = ifelse(revenue == 0, NA, revenue),
    #voteAvg = ifelse(voteCount == 0, NA, voteAvg),

    # actorsPopularity -> métricas (para manejar 3.45|12.31|...)
    actorsPopularity_mean = sapply(lapply(actorsPopularity, split_pipe_num), safe_mean),
  )

movies_cuant <- movies[sapply(movies, is.numeric)]
movies_cual  <- movies[sapply(movies, function(x) !is.numeric(x))]
```

## Exploración de Datos

```{r}
# Dimensión del conjunto de datos
dim(movies) #<-- Cuántas filas y columnas tiene el dataset

# Estructura de los datos
str(movies) #<--- Tipo de variables (numéricas, categóricas, texto, etc.)

# Resumen estadístico general
summary(movies) #<-- Exploración rápida:  - Mínimo, máximo, media, mediana (variables numéricas)  - Frecuencias (variables categóricas)\
```

Conclusion: A partir de la exploración inicial del conjunto de datos se observa que el dataset contiene **19,883 observaciones y 28 variables**, lo que representa un volumen de datos considerable para el análisis.

La estructura del conjunto de datos muestra una **combinación de variables numéricas, lógicas y de tipo carácter**. Las variables de tipo carácter predominan en campos descriptivos como *géneros, director, actores, títulos, idioma original y países de producción*, lo cual indica que gran parte de la información es cualitativa y requiere procesos adicionales de limpieza o transformación para análisis más avanzados.

Las variables numéricas incluyen información relevante como *presupuesto, ingresos, duración, popularidad, calificación promedio y conteo de votos*. Se observa que varias de estas variables presentan **valores mínimos iguales a cero**, especialmente en *budget, revenue, voteAvg y voteCount*, lo que sugiere la existencia de películas sin información financiera o de votación registrada.

El resumen estadístico también evidencia la presencia de **valores extremos**, por ejemplo en *budget, revenue, actorsAmount, castWomenAmount y castMenAmount*, lo cual podría influir en medidas como la media y requerir el uso de medidas robustas como la mediana en análisis posteriores.

Finalmente, se identifican **valores faltantes (NA)** en algunas variables, como *video, castWomenAmount, castMenAmount y releaseYear*, por lo que será necesario considerar técnicas de manejo de datos faltantes antes de realizar análisis más profundos.

---

## Clasificación de Variables

| Variable                  | Tipo         | Subtipo  |
|---------------------------|--------------|----------|
| id                        | Cualitativa  | Nominal  |
| originalTitle             | Cualitativa  | Nominal  |
| originalLanguage          | Cualitativa  | Nominal  |
| title                     | Cualitativa  | Nominal  |
| homePage                  | Cualitativa  | Nominal  |
| video                     | Cualitativa  | Nominal  |
| director                  | Cualitativa  | Nominal  |
| genres                    | Cualitativa  | Nominal  |
| productionCompany         | Cualitativa  | Nominal  |
| productionCompanyCountry  | Cualitativa  | Nominal  |
| productionCountry         | Cualitativa  | Nominal  |
| actors                    | Cualitativa  | Nominal  |
| actorsCharacter           | Cualitativa  | Nominal  |
| genresAmount              | Cuantitativa | Discreta |
| productionCoAmount        | Cuantitativa | Discreta |
| productionCountriesAmount | Cuantitativa | Discreta |
| voteCount                 | Cuantitativa | Discreta |
| actorsAmount              | Cuantitativa | Discreta |
| castWomenAmount           | Cuantitativa | Discreta |
| castMenAmount             | Cuantitativa | Discreta |
| releaseYear               | Cuantitativa | Discreta |
| popularity                | Cuantitativa | Continua |
| budget                    | Cuantitativa | Continua |
| revenue                   | Cuantitativa | Continua |
| runtime                   | Cuantitativa | Continua |
| voteAvg                   | Cuantitativa | Continua |
| actorsPopularity_mean     | Cuantitativa | Continua |
| releaseDate               | Cualitativa  | Ordinal  |

actorsPopularity_mean es la variable que se generó para gestionar correctamente la variable actorsPopularity, la cual tenía los datos distribuidos como 1|123|3.23

## Análisis de Frecuencia/Distribución

#### Distribuciones

H0: La variable sigue una distribución normal H1: La variable NO sigue una distribución normal

```{r}
lillie_results <- lapply(movies_cuant, lillie.test)
```

**budget**

```{r}
hist(movies_cuant$budget)
lillie_results$budget
```

-   La distribución no es normal, gráficamente se visualiza un sesgo considerable hacia la izquierda. Adicionalmente, el p-value es de 2.2e-16, confirma el rechazo de la normalidad.

**revenue**

```{r}
hist(movies_cuant$revenue)
lillie_results$revenue
```

-   Igual que con la variable "budget", gráficamente se identifica un sesgo hacia la izquierda, y al p-value ser de 2.2e-16 se dice que no tiene una distribución normal.

**runtime**

```{r}
hist(movies_cuant$runtime)
lillie_results$runtime
```

-   Gráficamente se identifica un sesgo hacia la izquierda, y el p-value es de 2.2e-16 por lo que se dice que no sigue una distribución normal.

**popularity**

```{r}
hist(movies_cuant$popularity)
lillie_results$popularity
```

-   Se evidencia que el gráfico está sesgado hacia la izquierda, y el valor-p es 2.2e-16 por lo que se dice que no sigue una distribución normal.

**voteAvg**

```{r}
hist(movies_cuant$voteAvg)
lillie_results$voteAvg
```

-   Gráficamente se ve que se tiene una alta concentración en los valores bajos, y otros están alrededor de y 8. Además, el p-value es de 2.2e-16 por lo que se rechaza que tenga distribución normal.

**voteCount**

```{r}
hist(movies_cuant$voteCount)
lillie_results$voteCount
```

-   El gráfico se ve sesgado a la izquierda, y el p-value es de 2.2e-16 por lo que no tiene uns distribución normal.

**genresAmount**

```{r}
hist(movies_cuant$genresAmount)
lillie_results$genresAmount
```

-   En el gráfico se ve que los datos están concentrados hacia la izquierda, y el p-value 2.2e-16 indica que no es una distribución normal.

**productionCoAmount**

```{r}
hist(movies_cuant$productionCoAmount)
lillie_results$productionCoAmount
```

-   Los datos están considerablemente sesgados a la izquierda en el gráfico, y el p-value es 2.2e-16 entonces no hay distribución normal.

**productionCountriesAmount**

```{r}
hist(movies_cuant$productionCountriesAmount)
lillie_results$productionCountriesAmount
```

-   Una vez más los datos están sesgados a la izquierda y el p-value es de 2.2e-16 por lo que se dice que no tiene una distribución normal.

**actorsAmount**

```{r}
hist(movies_cuant$actorsAmount)
lillie_results$actorsAmount
```

-   Los datos están sesgados a la izquierda y el p-value es de 2.2e-16, entonces no hay distribución normal.

**castWomenAmount**

```{r}
hist(movies_cuant$castWomenAmount)
lillie_results$castWomenAmount
```

-   Gráficamente los datos están concentrados a la izquierda y el p-value es de 2.2e-16 por lo que no hay distribución normal.

**castMenAmount**

```{r}
hist(movies_cuant$castMenAmount)
lillie_results$castMenAmount
```

-   Se evidencia que el gráfico está sesgado hacia la izquierda, y el valor-p es 2.2e-16 por lo que se dice que no sigue una distribución normal.

**releaseYear**

```{r}
hist(movies_cuant$releaseYear)
lillie_results$releaseYear
```

-   Los datos están sesgados hacia la derecha en el gráfico y el p-value es de 2.2e-16, por lo que la distribución no es normal.

**actorsPopularity_mean**


```{r}
hist(movies_cuant$actorsPopularity_mean)
lillie_results$actorsPopularity_mean
```

-   Los datos se ven sesgados a la izquierda, y con un p-value de 2.2e-16 se puede confirmar que no se distribuyen normalmente.

> Ninguno de las variables presentadas está distribuida normalmente.

------------------------------------------------------------------------

#### Frecuencia

```{r}
freqs <- lapply(movies_cual, table)
freqs$productionCompanyCountry
```

---

```{r}
freqs$video
```

---

```{r}
freqs$director
```

---

```{r}
freqs$originalTitle
```

---

```{r}
freqs$title
```

---

```{r}
freqs$originalLanguage
```

---

```{r}
freqs$releaseDate
```

---

Las frecuencias de variables multivalor (cuyas observaciones estaban separadas por '|'), se decidió no incluirlas en las tablas de frecuencia por su estructura. Asimismo, se omitió la variable homePage, al ser algo que no aportaba valor al análisis a realizar, además de ser único para cada película.

PREGUNTAR A ERICK SI QUITAMOS LAS DE TITLE

---
